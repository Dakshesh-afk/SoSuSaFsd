@using SoSuSaFsd.Domain
@using SoSuSaFsd.Components.Common.PostCardComponents

@* PostCard - Main post display component (orchestration only) *@

<div class="post-card">
    <PostCardHeader Post="@Post" />

    <div class="post-content">@Post.Content</div>

    <PostCardMedia 
        Post="@Post" 
        CarouselIndices="@CarouselIndices" 
        OnCarouselChange="@OnCarouselChange" />

    <PostCardActions 
        Post="@Post" 
        CurrentUser="@CurrentUser" 
        OnLike="@OnLike" 
        OnComment="@OnComment" 
        OnReport="@OnReport" />

    <PostCardComments 
        Post="@Post" 
        ShowComments="@ShowComments" 
        PostComments="@PostComments" 
        CommentDrafts="@CommentDrafts" 
        ActiveReplyBoxes="@ActiveReplyBoxes" 
        ReplyDrafts="@ReplyDrafts" 
        OnUpdateDraft="@OnUpdateDraft" 
        OnSubmitComment="@OnSubmitComment" 
        OnToggleReply="@OnToggleReply" 
        OnUpdateReplyDraft="@OnUpdateReplyDraft" 
        OnSubmitReply="@OnSubmitReply" />
</div>

@code {
    [Parameter] public Posts Post { get; set; } = null!;
    [Parameter] public Users? CurrentUser { get; set; }
    [Parameter] public EventCallback<int> OnLike { get; set; }
    [Parameter] public EventCallback<int> OnComment { get; set; }
    [Parameter] public EventCallback<int> OnReport { get; set; }

    // Comment Data
    [Parameter] public Dictionary<int, bool>? ShowComments { get; set; }
    [Parameter] public Dictionary<int, List<Comments>>? PostComments { get; set; }
    [Parameter] public Dictionary<int, string>? CommentDrafts { get; set; }

    // Reply Data
    [Parameter] public Dictionary<int, bool>? ActiveReplyBoxes { get; set; }
    [Parameter] public Dictionary<int, string>? ReplyDrafts { get; set; }

    // Events
    [Parameter] public EventCallback<PostCardComments.CommentDraftEventArgs> OnUpdateDraft { get; set; }
    [Parameter] public EventCallback<int> OnSubmitComment { get; set; }
    [Parameter] public EventCallback<int> OnToggleReply { get; set; }
    [Parameter] public EventCallback<PostCardComments.ReplyDraftEventArgs> OnUpdateReplyDraft { get; set; }
    [Parameter] public EventCallback<PostCardComments.SubmitReplyEventArgs> OnSubmitReply { get; set; }

    // Carousel
    [Parameter] public Dictionary<int, int>? CarouselIndices { get; set; }
    [Parameter] public EventCallback<PostCardMedia.CarouselEventArgs> OnCarouselChange { get; set; }
}